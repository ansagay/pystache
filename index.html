<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Pystache by ansagay</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Pystache</h1>
      <h2 class="project-tagline">Mustache in Python</h2>
      <a href="https://github.com/ansagay/pystache" class="btn">View on GitHub</a>
      <a href="https://github.com/ansagay/pystache/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ansagay/pystache/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="pystache" class="anchor" href="#pystache" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pystache</h1>



















<p><img src="https://raw.github.com/defunkt/pystache/master/gh/images/logo_phillips.png" alt="" title="mustachioed, monocled snake by David Phillips"></p>

<p><img src="https://secure.travis-ci.org/defunkt/pystache.png" alt=""></p>

<p><a href="https://github.com/defunkt/pystache">Pystache</a> is a Python
implementation of <a href="http://mustache.github.com/">Mustache</a>. Mustache is a
framework-agnostic, logic-free templating system inspired by
<a href="http://code.google.com/p/google-ctemplate/">ctemplate</a> and
<a href="http://www.ivan.fomichev.name/2008/05/erlang-template-engine-prototype.html">et</a>.
Like ctemplate, Mustache "emphasizes separating logic from presentation:
it is impossible to embed application logic in this template language."</p>

<p>The <a href="http://mustache.github.com/mustache.5.html">mustache(5)</a> man page
provides a good introduction to Mustache's syntax. For a more complete
(and more current) description of Mustache's behavior, see the official
<a href="https://github.com/mustache/spec">Mustache spec</a>.</p>

<p>Pystache is <a href="http://semver.org">semantically versioned</a> and can be found
on <a href="http://pypi.python.org/pypi/pystache">PyPI</a>. This version of
Pystache passes all tests in <a href="https://github.com/mustache/spec/tree/v1.1.2">version
1.1.2</a> of the spec.</p>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<p>Pystache is tested with--</p>

<ul>
<li>  Python 2.4 (requires simplejson <a href="http://pypi.python.org/pypi/simplejson/2.0.9">version
2.0.9</a> or earlier)</li>
<li>  Python 2.5 (requires
<a href="http://pypi.python.org/pypi/simplejson/">simplejson</a>)</li>
<li>  Python 2.6</li>
<li>  Python 2.7</li>
<li>  Python 3.1</li>
<li>  Python 3.2</li>
<li>  Python 3.3</li>
<li>  <a href="http://pypy.org/">PyPy</a>
</li>
</ul>

<p><a href="http://packages.python.org/distribute/">Distribute</a> (the setuptools fork)
is recommended over <a href="http://pypi.python.org/pypi/setuptools">setuptools</a>,
and is required in some cases (e.g. for Python 3 support).
If you use <a href="http://www.pip-installer.org/">pip</a>, you probably already satisfy
this requirement.</p>

<p>JSON support is needed only for the command-line interface and to run
the spec tests. We require simplejson for earlier versions of Python
since Python's <a href="http://docs.python.org/library/json.html">json</a> module
was added in Python 2.6.</p>

<p>For Python 2.4 we require an earlier version of simplejson since
simplejson stopped officially supporting Python 2.4 in simplejson
version 2.1.0. Earlier versions of simplejson can be installed manually,
as follows:</p>

<pre><code>pip install 'simplejson&lt;2.1.0'
</code></pre>

<h2>
<a id="install-it" class="anchor" href="#install-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install It</h2>

<pre><code>pip install pystache
</code></pre>

<p>And test it--</p>

<pre><code>pystache-test
</code></pre>

<p>To install and test from source (e.g. from GitHub), see the Develop
section.</p>

<h2>
<a id="use-it" class="anchor" href="#use-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use It</h2>

<pre><code>&gt;&gt;&gt; import pystache
&gt;&gt;&gt; print pystache.render('Hi {{person}}!', {'person': 'Mom'})
Hi Mom!
</code></pre>

<p>You can also create dedicated view classes to hold your view logic.</p>

<p>Here's your view class (in .../examples/readme.py):</p>

<pre><code>class SayHello(object):
    def to(self):
        return "Pizza"
</code></pre>

<p>Instantiating like so:</p>

<pre><code>&gt;&gt;&gt; from pystache.tests.examples.readme import SayHello
&gt;&gt;&gt; hello = SayHello()
</code></pre>

<p>Then your template, say_hello.mustache (by default in the same
directory as your class definition):</p>

<pre><code>Hello, {{to}}!
</code></pre>

<p>Pull it together:</p>

<pre><code>&gt;&gt;&gt; renderer = pystache.Renderer()
&gt;&gt;&gt; print renderer.render(hello)
Hello, Pizza!
</code></pre>

<p>For greater control over rendering (e.g. to specify a custom template
directory), use the <code>Renderer</code> class like above. One can pass attributes
to the Renderer class constructor or set them on a Renderer instance. To
customize template loading on a per-view basis, subclass <code>TemplateSpec</code>.
See the docstrings of the
<a href="https://github.com/defunkt/pystache/blob/master/pystache/renderer.py">Renderer</a>
class and
<a href="https://github.com/defunkt/pystache/blob/master/pystache/template_spec.py">TemplateSpec</a>
class for more information.</p>

<p>You can also pre-parse a template:</p>

<pre><code>&gt;&gt;&gt; parsed = pystache.parse(u"Hey {{#who}}{{.}}!{{/who}}")
&gt;&gt;&gt; print parsed
[u'Hey ', _SectionNode(key=u'who', index_begin=12, index_end=18, parsed=[_EscapeNode(key=u'.'), u'!'])]
</code></pre>

<p>And then:</p>

<pre><code>&gt;&gt;&gt; print renderer.render(parsed, {'who': 'Pops'})
Hey Pops!
&gt;&gt;&gt; print renderer.render(parsed, {'who': 'you'})
Hey you!
</code></pre>

<h2>
<a id="python-3" class="anchor" href="#python-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Python 3</h2>

<p>Pystache has supported Python 3 since version 0.5.1. Pystache behaves
slightly differently between Python 2 and 3, as follows:</p>

<ul>
<li>  In Python 2, the default html-escape function <code>cgi.escape()</code> does
not escape single quotes.  In Python 3, the default escape function
<code>html.escape()</code> does escape single quotes.</li>
<li>  In both Python 2 and 3, the string and file encodings default to
<code>sys.getdefaultencoding()</code>. However, this function can return
different values under Python 2 and 3, even when run from the same
system. Check your own system for the behavior on your system, or do
not rely on the defaults by passing in the encodings explicitly
(e.g. to the <code>Renderer</code> class).</li>
</ul>

<h2>
<a id="unicode" class="anchor" href="#unicode" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unicode</h2>

<p>This section describes how Pystache handles unicode, strings, and
encodings.</p>

<p>Internally, Pystache uses <a href="http://docs.python.org/howto/unicode.html#tips-for-writing-unicode-aware-programs">only unicode
strings</a>
(<code>str</code> in Python 3 and <code>unicode</code> in Python 2). For input, Pystache
accepts both unicode strings and byte strings (<code>bytes</code> in Python 3 and
<code>str</code> in Python 2). For output, Pystache's template rendering methods
return only unicode.</p>

<p>Pystache's <code>Renderer</code> class supports a number of attributes to control
how Pystache converts byte strings to unicode on input. These include
the <code>file_encoding</code>, <code>string_encoding</code>, and <code>decode_errors</code> attributes.</p>

<p>The <code>file_encoding</code> attribute is the encoding the renderer uses to
convert to unicode any files read from the file system. Similarly,
<code>string_encoding</code> is the encoding the renderer uses to convert any other
byte strings encountered during the rendering process into unicode (e.g.
context values that are encoded byte strings).</p>

<p>The <code>decode_errors</code> attribute is what the renderer passes as the
<code>errors</code> argument to Python's built-in unicode-decoding function
(<code>str()</code> in Python 3 and <code>unicode()</code> in Python 2). The valid values for
this argument are <code>strict</code>, <code>ignore</code>, and <code>replace</code>.</p>

<p>Each of these attributes can be set via the <code>Renderer</code> class's
constructor using a keyword argument of the same name. See the Renderer
class's docstrings for further details. In addition, the <code>file_encoding</code>
attribute can be controlled on a per-view basis by subclassing the
<code>TemplateSpec</code> class. When not specified explicitly, these attributes
default to values set in Pystache's <code>defaults</code> module.</p>

<h2>
<a id="develop" class="anchor" href="#develop" aria-hidden="true"><span class="octicon octicon-link"></span></a>Develop</h2>

<p>To test from a source distribution (without installing)--</p>

<pre><code>python test_pystache.py
</code></pre>

<p>To test Pystache with multiple versions of Python (with a single
command!), you can use <a href="http://pypi.python.org/pypi/tox">tox</a>:</p>

<pre><code>pip install 'virtualenv&lt;1.8'  # Version 1.8 dropped support for Python 2.4.
pip install 'tox&lt;1.4'  # Version 1.4 dropped support for Python 2.4.
tox
</code></pre>

<p>If you do not have all Python versions listed in <code>tox.ini</code>--</p>

<pre><code>tox -e py26,py32  # for example
</code></pre>

<p>The source distribution tests also include doctests and tests from the
Mustache spec. To include tests from the Mustache spec in your test
runs:</p>

<pre><code>git submodule init
git submodule update
</code></pre>

<p>The test harness parses the spec's (more human-readable) yaml files if
<a href="http://pypi.python.org/pypi/PyYAML">PyYAML</a> is present. Otherwise, it
parses the json files. To install PyYAML--</p>

<pre><code>pip install pyyaml
</code></pre>

<p>To run a subset of the tests, you can use
<a href="http://somethingaboutorange.com/mrl/projects/nose/0.11.1/testing.html">nose</a>:</p>

<pre><code>pip install nose
nosetests --tests pystache/tests/test_context.py:GetValueTests.test_dictionary__key_present
</code></pre>

<h3>
<a id="using-python-3-with-pystache-from-source" class="anchor" href="#using-python-3-with-pystache-from-source" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using Python 3 with Pystache from source</h3>

<p>Pystache is written in Python 2 and must be converted to Python 3 prior to
using it with Python 3.  The installation process (and tox) do this
automatically.</p>

<p>To convert the code to Python 3 manually (while using Python 3)--</p>

<pre><code>python setup.py build
</code></pre>

<p>This writes the converted code to a subdirectory called <code>build</code>.
By design, Python 3 builds
<a href="https://bitbucket.org/tarek/distribute/issue/292/allow-use_2to3-with-python-2">cannot</a>
be created from Python 2.</p>

<p>To convert the code without using setup.py, you can use
<a href="http://docs.python.org/library/2to3.html">2to3</a> as follows (two steps)--</p>

<pre><code>2to3 --write --nobackups --no-diffs --doctests_only pystache
2to3 --write --nobackups --no-diffs pystache
</code></pre>

<p>This converts the code (and doctests) in place.</p>

<p>To <code>import pystache</code> from a source distribution while using Python 3, be
sure that you are importing from a directory containing a converted
version of the code (e.g. from the <code>build</code> directory after converting),
and not from the original (unconverted) source directory.  Otherwise, you will
get a syntax error.  You can help prevent this by not running the Python
IDE from the project directory when importing Pystache while using Python 3.</p>

<h2>
<a id="mailing-list" class="anchor" href="#mailing-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mailing List</h2>

<p>There is a <a href="http://librelist.com/browser/pystache/">mailing list</a>. Note
that there is a bit of a delay between posting a message and seeing it
appear in the mailing list archive.</p>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<pre><code>&gt;&gt;&gt; context = { 'author': 'Chris Wanstrath', 'maintainer': 'Chris Jerdonek' }
&gt;&gt;&gt; print pystache.render("Author: {{author}}\nMaintainer: {{maintainer}}", context)
Author: Chris Wanstrath
Maintainer: Chris Jerdonek
</code></pre>

<p>Pystache logo by <a href="http://davidphillips.us/">David Phillips</a> is licensed
under a <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported
License</a>.
<img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" alt="" title="Creative
Commons Attribution-ShareAlike 3.0 Unported License"></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ansagay/pystache">Pystache</a> is maintained by <a href="https://github.com/ansagay">ansagay</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
